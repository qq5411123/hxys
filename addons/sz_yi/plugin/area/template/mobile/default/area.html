{template 'common/header'}
<title>{$category['name']}</title>
<link rel="stylesheet" type="text/css" href="../addons/sz_yi/template/mobile/default/static/css/area.css">
<script language="javascript" src="../addons/sz_yi/template/mobile/default/static/js/common.js"></script>

<style type="text/css">

    body {margin:0px; width:100%; height:100%; background:#efefef; color:#fff; }
    html {}
    .main {height:100%; width:100%; background:#fff; }
    .main .category {height:100%; width:60%; background:rgba(0,0,0,0.8);  position:fixed; left:-60%; top:0; z-index:9999;overflow-y: auto;}
    .main .category .title {height:44px; width:100%; background:rgba(0,0,0,0.2); line-height:44px; font-size:16px; color:#fff; text-align:center;}
    .main .category .all {height:auto; width:80%; padding:10px 10%; color:#fff;}
    .main .category .all p {height:auto; width:100%; font-size:14px; line-height:20px; padding:0px; margin:0px;}
    .main .category .all a{text-decoration: none}
   .main .category .all p.category_item { padding-top:10px;}
    .main .category .all p.child {height:auto; width:100%; font-size:14px; line-height:20px;  padding-left:10px;padding-top:10px;}
    .main .category .all p.third {height:auto; width:100%; font-size:14px; line-height:20px;  padding-left:20px;padding-top:10px;}
    .main .category .all span {height:auto; width:95%; margin-left:5%; margin-bottom:10px; font-size:16px; line-height:20px; padding:0px;}

    .main .page {width:100%; background:#eee; }
    .main .page .topbar {height:28px; width:100%; background:#f9f9f9; padding:8px 0;}
    .main .page .topbar .list1,    .main .page .topbar .list2 {height:28px; width:10%; float:left; margin-left:3%; line-height:28px; font-size:24px; text-align:left; color:#999;}
    .main .page .topbar .name {height:28px; width:54%; padding-left:10%; margin:auto; text-align:center; float:left; font-size:16px; line-height:28px; color:#666;}
    .main .page .topbar .sort {height:28px; width:10%; float:right; font-size:18px; line-height:28px; padding-top:5px; text-align:right; color:#999;}
    .main .page .topbar .search {height:28px; width:10%; float:right; margin-right:3%; font-size:18px; line-height:25px; text-align:right; color:#999;}

    .main .page .goods {height:auto; width:98%; padding:0 1%; margin-top:5px; float:left;}
    .main .page .goods .good {width: 50%;box-sizing: border-box;float: left;    padding: 8px 4px 4px 8px;}
    .main .page .goods .good img {width:100%; }
    .main .page .goods .good .nostock { position: absolute;bottom:20px;right:0px; width:30%;height:30%;z-index: 999;}
    .main .page .goods .good .nostock img { max-width: 50px}
	.goods-img {
    width: 100%;
    height: 0;
    padding-bottom: 100%;
    position: relative;
}
    .goods-cont {
    background-color: #fff;
    padding: 5px;
    box-sizing: border-box;
}

    .main .page .goods .good .name {height:42px; width:100%; font-size:14px; color:#333333; line-height:22px;overflow:hidden; padding-bottom:5px;}
    .main .page .goods .good .price {height:25px; width:100%; font-size:16px; color:#ff6600}
    .main .page .goods .good .price span {height:23px; width:auto; padding:2px 6px; color:#cccccc; font-size:12px; border-radius:5px; text-decoration: line-through}
    .main .page .copyright {height:40px; width:100%; text-align:center; line-height:40px; font-size:12px; color:#999; margin-top:10px;float:left;}


    #list_loading { width:94%;padding:10px;color:#666;text-align: center;float:right;}
    .list_no {height:100px; width:100%; margin:50px 0px 60px; color:#ccc; font-size:12px; text-align:center;}
    .list_no_menu {height:40px; width:50%; text-align:center;margin:auto;}
    .list_no_nav {height:38px; padding:5px;background:#eee; border:1px solid #d4d4d4; border-radius:5px; text-align:center; line-height:38px; color:#666;}

.category_group {background:#fff; border-bottom:1px solid #efefef;border-top:1px solid #efefef; height:37px;overflow: auto;  overflow-y: hidden;   list-style-type:none; ;white-space:nowrap;-webkit-overflow-scrolling:touch ; }
.category_group .container{ height:45px;overflow: auto; list-style-type:none;white-space:nowrap;-webkit-overflow-scrolling:touch ; }
.category_group  a {color:#f90;   height:45px; line-height:35px; text-decoration: none; color:#333; text-align: center; padding:10px;; }
.category_group  a.on  { color:#f90;font-weight:bold;background:#efefef;}

span.f12 {
    font-size: 10px;
}

#fenye{clear:both;margin:15px 0;height:35px; text-align:center; }
#fenye table{ width:100%}
#fenye img{ vertical-align:inherit}
#fenye a,#fenye span{text-decoration:none; font-size:14px;height:30px;display:inline-block; text-align:center; 
line-height:30px;color:#666;border: 1px solid #ccc;padding:0 10px; font-size:12px; margin:0 2px;background:#fff; border-radius:3px; }
#fenye a.curr{background-color: #EFEFEF; cursor:default;}
#fenye a:hover{color:#333; background-color: #EFEFEF; }
#fenye span em{ margin-left:5px;}
.head a{ text-decoration:none}

.pagination{display:inline-block;padding-left:0;margin:20px auto;border-radius:4px;text-align: center;width:100%;}.pagination>li{display:inline-block;}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;margin-left:-1px;line-height:1.42857143;color:#666;text-decoration:none;background-color:#fff;border:1px solid #ddd}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-top-right-radius:4px;border-bottom-right-radius:4px}.pagination>li>a:hover,.pagination>li>span:hover,.pagination>li>a:focus,.pagination>li>span:focus{color:#2a6496;background-color:#eee;border-color:#ddd}.pagination>.active>a,.pagination>.active>span,.pagination>.active>a:hover,.pagination>.active>span:hover,.pagination>.active>a:focus,.pagination>.active>span:focus{z-index:2;cursor:default;background-color:#EFEFEF;}.pagination>.disabled>span,.pagination>.disabled>span:hover,.pagination>.disabled>span:focus,.pagination>.disabled>a,.pagination>.disabled>a:hover,.pagination>.disabled>a:focus{color:#777;cursor:not-allowed;background-color:#fff;border-color:#ddd}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;font-size:18px}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-top-left-radius:6px;border-bottom-left-radius:6px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-top-right-radius:6px;border-bottom-right-radius:6px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;font-size:12px}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-top-left-radius:3px;border-bottom-left-radius:3px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-top-right-radius:3px;border-bottom-right-radius:3px}.pager{padding-left:0;margin:20px 0;text-align:center;list-style:none}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;border-radius:15px}.pager li>a:hover,.pager li>a:focus{text-decoration:none;background-color:#eee}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:hover,.pager .disabled>a:focus,.pager .disabled>span{color:#777;cursor:not-allowed;background-color:#fff}


div.addinfo{height:18px;}

.label-waring {
    font-size: 12px;
    line-height: 14px;
    padding: 1px 5px;
    display: inline-block; 
}

.label-waring {
    background-color: #fd6801;
    color: #fff;
}.tint-gray {
    color: #ccc;
}.f12 {
    font-size: 12px;
    line-height: 14px;
}
.class1 {background:#fff; border-top:1px solid #eee; border-bottom:1px solid #eee;overflow:hidden;margin-bottom:10px;}
.class1 .class2 {height:85px; width:25%; float:left;}
.class1 .class2:active {background:#f7f7f7;}
.class1 .class2 .class3 {height:70px; width:80px; margin:auto;}
.class1 .class2 .class3 .ico {height:40px; width:40px; margin:10px 15px 10px 15px; line-height:40px; text-align:center; color:#fff; font-size:18px;}
.class1 .class2 .class3 .ico img { width:50px;height:50px;}
.class1 .class2 .class3 .text {height:20px; width:80px; font-size:12px; color:#999; text-align:center; line-height:20px;overflow:hidden;}
</style>


        
             
             
             

<div id='container'></div>

<script id='tpl_main' type='text/html'>
     <!--搜索-->
    
  
    <div class="main">  

        <div id="mainslider" class="mainslider">
            <div class="hd">
                <ul><li class="on">1</li></ul>
            </div>
            <div class="bd">
                <div class="tempWrap" style="overflow:hidden; position:relative;"><ul style="width: 100%; position: relative; overflow: hidden; padding: 0px; margin: 0px; transition-duration: 200ms; transform: translate(0px, 0px) translateZ(0px);">
                    
                            <li style="display: table-cell; vertical-align: top; width: 100%;"><a href="{$category['url']}{$category['id']}" target="_self" title="{$category['name']}简介">
                                <img src="{$category['advimg']}"><span class="localintro">查看{$category['name']}简介介绍</span></a></li>
                        
                </ul></div>
            </div>
        </div>

        <div class="goods">
            <div id='goods_container'></div>
        </div>
            
        
    </div>
</script>
 
<script id='tpl_goods_list' type='text/html'>
    
<div class="select_place_bg goods_banner_bg" id="goods_banner_bg"></div>
            <div class="goods_banner_box">
                <div class="goods_banner goods_banner_shop">
                    <div class="gbn_li">
                        <a class="banner_hd banner_hd1" style="color:orange" >
                        {$_GPC['word']}
                        </a>
                        <div class="banner_cont banner_cont1">
                            <a class="options" data-id="0">综合排序</a>
                            <a class="options" data-id="1">最新上架</a>
                            <a class="options" data-id="2">销量高到低</a>
                            <a class="options" data-id="3">价格高到低</a>
                            <a class="options" data-id="4">价格低到高</a>
                        </div>
                    </div>
                    
                </div>
            </div>
            <div class="productlist_shop">
                <ul class="goodslist" id="goodslist">
                {loop $goods $g}
                    <li class="page0" style="overflow: hide;"><dl class="foodlistdl"><dd class="foodimg"><a href="{php echo $this->createMobileUrl('shop/detail',array('id'=>$g['id'], 'my'=>$_GPC['my']))}" class="a" target="_self"><img class="lazy" src="{$g['thumb']}" onerror="isExitsImg_nopic(this)"><span class="txtlbl" style="display: none; background-color: rgb(255, 0, 0);"></span></a></dd><dt class="foodtitle"><a href="{php echo $this->createMobileUrl('shop/detail',array('id'=>$g['id'], 'my'=>$_GPC['my']))}" target="_self" class="name a">{$g['title']}</a></dt><dd class="foodprice"><span class="price"><i>¥</i>{$g['marketprice']}</span><span class="indexname">{$g['unit']}</span><span class="xiaoliang fukuan">{$g['sales']}人付款</span></dd><dd class="freeshipping"><a href="{php echo $this->createMobileUrl('shop/detail',array('id'=>$g['id'], 'my'=>$_GPC['my']))}" class="a diqu" target="_self"><span class="diqu_sxs">{$g['pcate_name']} {$g['ccate_name']} {$g['tcate_name']} </span>{if $g['issendfree'] == 1}<span class="baoyou">包邮</span>{/if}</a></dd></dl>
                    </li>
                {/loop}
                </ul>

            </div>
    {$pager}
</script>
<script id="tpl_category" type="text/html"> 

</script>

<script id='tpl_empty' type='text/html'>
 <div class="list_no"><i class="fa fa-shopping-cart" style="font-size:100px;"></i><br><span style="line-height:18px; font-size:16px;">暂时没有相关商品</span><br>主人快去给我找点其他东西吧</div>
<div class="list_no_menu">
        <div class="list_no_nav" onclick="location.href='{php echo $this->createMobileUrl('shop/list')}'">看看其他的</div>
 </div>
</script>
<script language='javascript'>
    require(['core', 'tpl'], function (core, tpl) {
        function getGoods() {
            $('#container').html(tpl('tpl_main'));
            $('#goods_container').html(tpl('tpl_goods_list'));
            $('#category').html(tpl('tpl_category'));
            bindEvents();
        }

      
        
        function getGoodsMore() {
     
            core.json('shop/list', args, function (json) {
                var result = json.result;
                $('#goods_container').append(tpl('tpl_goods_list',result));
                bindEvents();
                $('#list_loading').remove();
                if (result.goods.length < result.pagesize) {
                        $('#goods_container').append('<div id="list_loading">已经加载全部商品</div>');
                        loaded = true;
                        $(window).scroll = null;
                        return;
                }
                stop=true;
                bindMore(); 
                
            });
        }
        function bindEvents() {
            // $('.good img').each(function(){
            //    $(this).height($(this).width()); 
            // });
            $('.page0').unbind('click').click(function () {
                        location.href = core.getUrl('shop/detail', {id: $(this).data('goodsid'),my:'{$_GPC['my']}'});
            });
        }
        
        function bindMore() {
     
            $(window).scroll(function () {
  
                if (loaded) {
                    return;
                }
                totalheight = parseFloat($(window).height()) + parseFloat($(window).scrollTop());
                if ($(document).height() <= totalheight) {
                
                    if (stop == true) {
                        stop = false;
                        $('#goods_container').append('<div id="list_loading"><i class="fa fa-spinner fa-spin"></i> 正在加载更多商品</div>');
                  
                        if(args.page=='' || args.page=='undefined'){
                            args.page = 1;
                        }
                        args.page++;
                        getGoodsMore();
                    }
                }
            });
        }

        getGoods();

        $('.banner_hd1').click(function(){
            if ($(this).attr('data-id') == '') {
                $('.banner_cont1').show();
                $(this).attr('data-id', 1);
            } else {
                $('.banner_cont1').hide();
                $(this).attr('data-id', '');
            }
            
        });
        $('.options').click(function(){
            var status = $(this).attr('data-id');
            var word = $(this).html();
            $('.banner_cont1').hide();
            $('.banner_cont1').attr('data-id', '');
            location.href="{php echo $this->createPluginMobileUrl('area/area',array('ccate_area' => $_GPC['ccate_area'], 'tcate_area' => $_GPC['tcate_area']))}&word="+word+"&status="+status;

        })
        
      
    });
        

    
</script>
{php $show_copyright=true; $show_footer = true;}
{template 'common/footer'}

